timestamp = "cn=timestamp,dc=source"

source = ["default"]

target {
    uri      = "ldaps://localhost:389"
    base     = "dc=target"
    binddn   = "cn=admin,dc=source"
    password = "secret"
    search = [ "ou=users,dc=target"
             , "ou=groups,dc=target"
             , "cn=user,ou=members,dc=target"
             ]
    ignore {
        dn = [ "ou=import,ou=users,dc=target"
             , "ou=import,ou=groups,dc=target"
             , "cn=vip,ou=members,dc=target"
             ]
        attr = [
            , ["entryUUID"]
            , ["cn=Robert Smith,ou=users,dc=target", "ou"]
              ["ou=users,dc=source" , "mail", "^foo@.*"]
            ]
    }
}

default {
    source {
        uri      = "ldaps://localhost:389"
        binddn   = "cn=admin,dc=source"
        base     = "dc=source"
        password = "secret"
        auditlog  = "./examples/auditlog.ldif"
        search = [ "ou=users,dc=source"
                 , "ou=groups,dc=source"
                 , "cn=user,ou=members,dc=source"
                 ]

        ignore {
            dn = [ "ou=users,dc=source"
                 , "ou=groups,dc=source"
                 , "cn=user,ou=members,dc=source"
                 ]
            attr = [
                , ["entryUUID"]
                , ["cn=Robert Smith,ou=users,dc=target", "ou"]
                  ["ou=users,dc=source" , "mail", "^foo@.*"]
                ]
        }
        rewrite {
            dn = [
                  ["ou=users,dc=source", "ou=import,ou=users,dc=target"]
                , ["ou=groups,dc=source", "ou=import,ou=groups,dc=target"]
                , ["cn=user,ou=members,dc=source", "cn=vip,ou=members,dc=target"]
                ]
            attr = [
                  ["ou=users,dc=source"
                  , "(mail:.*)@example.com", "\\1@raboof.com"]
                , ["cn=Robert Smith,ou=users,dc=source"
                  , "ou: Human *Resources", "ou: Human"]
                ]
        }
    }
}
